
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PROTOCOLO NITRO | Panel T√°ctico</title>
    <style>
        :root {
            --bg-dark: #0f0f0f;
            --card-bg: #1c1c1c;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --accent: #E50914; /* Rojo Netflix/Deportivo */
            --success: #00E676; /* Verde Brillante */
            --shadow-card: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            --border-light: 1px solid rgba(255, 255, 255, 0.1);
        }

        body {
            /* Cambio de fuente a una moderna y limpia (San Francisco / Roboto / Segoe UI) */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            background-image: linear-gradient(to bottom, #0a0a0a, #1a1a1a);
        }

        .container {
            max-width: 500px;
            width: 100%;
            padding-bottom: 100px;
            position: relative;
        }

        /* HEADER */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        h1 {
            font-size: 1.5rem;
            margin: 0;
            font-weight: 800;
            letter-spacing: -0.5px;
            background: linear-gradient(90deg, #fff, #ccc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .reset-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-muted);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }

        /* MISI√ìN BRIEFING (Modernizado) */
        .mission-box {
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.1), rgba(0,0,0,0));
            border-left: 4px solid var(--accent);
            border-radius: 8px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        .mission-head {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .mission-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            padding: 0 15px;
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.5;
        }
        .mission-body.open {
            max-height: 400px;
            padding-bottom: 15px;
        }

        /* CARDS MEJORADAS */
        .card {
            background: var(--card-bg);
            border: var(--border-light);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-card);
            /* Fix para superposici√≥n: contexto de apilamiento limpio */
            position: relative; 
            z-index: 1;
        }

        h2 {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* INPUT DE HORA (M√°s limpio) */
        .time-wrapper {
            position: relative;
            background: #252525;
            border-radius: 12px;
            padding: 5px;
            border: 1px solid #333;
            transition: border-color 0.3s;
        }
        .time-wrapper:focus-within {
            border-color: var(--accent);
        }
        input[type="time"] {
            width: 100%;
            background: transparent;
            border: none;
            color: #fff;
            font-family: inherit; /* Hereda la fuente moderna */
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            padding: 10px;
            outline: none;
        }
        /* Eliminar icono de reloj feo en algunos navegadores si se desea, o estilizar */
        input[type="time"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
            opacity: 0.3;
            cursor: pointer;
        }

        /* L√çNEA DE TIEMPO (Sin superposici√≥n) */
        .timeline {
            margin-top: 30px;
            position: relative;
            padding-left: 20px;
            border-left: 2px solid #333;
            display: none; /* JS lo activa */
        }
        .t-item {
            position: relative;
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(10px);
            animation: popIn 0.4s forwards;
        }
        @keyframes popIn { to { opacity: 1; transform: translateY(0); } }

        .t-dot {
            position: absolute;
            left: -27px; top: 5px;
            width: 12px; height: 12px;
            background: #222;
            border: 2px solid #555;
            border-radius: 50%;
            transition: all 0.3s;
            z-index: 2;
        }
        .t-item.highlight .t-dot {
            background: var(--accent);
            border-color: var(--accent);
            box-shadow: 0 0 10px var(--accent);
        }
        .t-item.success .t-dot {
            background: var(--success);
            border-color: var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .t-time {
            font-size: 1.1rem;
            font-weight: 700;
            color: #fff;
            display: block;
            margin-bottom: 4px;
        }
        .t-action {
            font-size: 1rem;
            color: var(--text-muted);
            margin-bottom: 2px;
        }
        .t-desc {
            font-size: 0.85rem;
            color: #666;
        }
        .t-item.highlight .t-action { color: var(--accent); font-weight: 600; }
        .t-item.success .t-action { color: var(--success); font-weight: 600; }

        /* CHECKLIST (Moderno) */
        .check-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: rgba(255,255,255,0.03);
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .check-item:active { transform: scale(0.98); }
        .check-item.done {
            opacity: 0.5;
            background: transparent;
        }
        
        .checkbox {
            width: 24px; height: 24px;
            border-radius: 6px;
            border: 2px solid #555;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .check-item.done .checkbox {
            background: var(--success);
            border-color: var(--success);
        }
        .check-item.done .checkbox::after {
            content: '‚úì'; color: #000; font-weight: bold; font-size: 14px;
        }

        /* BOT√ìN P√ÅNICO REDISE√ëADO */
        .panic-btn {
            background: linear-gradient(180deg, #ff3b3b, #bd0000);
            width: 100%;
            border: none;
            padding: 20px;
            border-radius: 16px;
            color: white;
            font-size: 1.2rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(229, 9, 20, 0.3);
            transition: transform 0.1s;
            position: relative;
            overflow: hidden;
        }
        .panic-btn:active { transform: scale(0.97); }
        .panic-btn span { position: relative; z-index: 2; }
        .panic-sub { font-size: 0.75rem; font-weight: 400; opacity: 0.9; text-transform: none; margin-top: 5px; display: block; }

        /* LINK DESCARGA (NUEVO) */
        .download-link {
            display: block;
            text-align: center;
            margin-top: 40px;
            color: #666;
            text-decoration: none;
            font-size: 0.8rem;
            border: 1px solid #333;
            padding: 15px;
            border-radius: 6px;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .download-link:hover { border-color: var(--accent); color: #fff; background: rgba(229, 9, 20, 0.05); }


        /* OVERLAY DE RESPIRACI√ìN */
        #breath-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #0a0a0a;
            z-index: 9999;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        /* Anillo de respiraci√≥n limpio */
        .breath-visual {
            width: 250px; height: 250px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
            opacity: 0.2;
            transform: scale(1);
            /* La animaci√≥n la maneja JS para sincronizar */
        }
        
        .breath-text-container {
            position: absolute;
            text-align: center;
            z-index: 10;
        }
        .breath-action {
            font-size: 2rem; font-weight: 800; color: #fff; display: block;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        .breath-countdown {
            font-size: 5rem; font-weight: 700; color: rgba(255,255,255,0.8);
            font-variant-numeric: tabular-nums;
            line-height: 1;
            margin-top: 10px;
        }

        .close-overlay {
            position: absolute;
            bottom: 40px;
            background: rgba(255,255,255,0.1);
            color: #fff;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .audio-player { width: 100%; filter: invert(0.9); margin-top: 10px; }
        footer { margin-top: 40px; text-align: center; font-size: 0.75rem; color: #555; }

    </style>
</head>
<body>

<div class="container">
    
    <!-- HEADER CON BOT√ìN RESET -->
    <header>
        <div>
            <h1>NITRO 24H</h1>
            <div style="font-size:0.8rem; color:var(--text-muted); margin-top:2px;">Panel T√°ctico</div>
        </div>
        <button class="reset-btn" onclick="resetApp()">
            üîÑ Reiniciar
        </button>
    </header>

    <!-- MISI√ìN BRIEFING -->
    <div class="mission-box">
        <div class="mission-head" onclick="toggleMission()">
            <span>üìÇ ¬øQU√â ES ESTE PANEL?</span>
            <span id="mission-icon">‚ñº</span>
        </div>
        <div class="mission-body" id="mission-body">
            <p>Has adquirido el <strong>Protocolo de Vascularidad Acelerada</strong>. Esta herramienta automatiza los c√°lculos biol√≥gicos para maximizar tu flujo sangu√≠neo (√ìxido N√≠trico) en las pr√≥ximas 24 horas.</p>
            <p><strong>INSTRUCCIONES:</strong></p>
            <ol>
                <li>Introduce la hora de tu cita.</li>
                <li>Sigue el itinerario generado.</li>
                <li>Usa la lista de suministros en el supermercado.</li>
                <li>Si sientes ansiedad, usa el bot√≥n rojo de abajo.</li>
            </ol>
        </div>
    </div>

    <!-- AUDIO -->
    <div class="card">
        <h2>üéß AUDIO-GU√çA (BRIEFING)</h2>
        <p style="font-size:0.9rem; color:#aaa; margin-bottom:15px; line-height:1.4;">
            Escucha esto mientras preparas los ingredientes. Instrucciones confidenciales de preparaci√≥n.
        </p>
        <audio controls class="audio-player">
            <source src="audio_nitro.mp3" type="audio/mpeg">
            Tu navegador no soporta audio.
        </audio>
    </div>

    <!-- CRON√ìMETRO -->
    <div class="card">
        <h2>‚è±Ô∏è SINCRONIZACI√ìN</h2>
        <div class="time-wrapper">
            <input type="time" id="actionTime" onchange="calcTimeline()">
        </div>
        
        <!-- Este contenedor se llenar√° con JS -->
        <div class="timeline" id="timeline"></div>
    </div>

    <!-- SUMINISTROS -->
    <div class="card">
        <h2>üõí SUMINISTROS</h2>
        
        <div class="check-item" onclick="toggleCheck(this)">
            <div class="checkbox"></div>
            <span><strong>Sand√≠a Mediana</strong> (Usar parte blanca)</span>
        </div>
        <div class="check-item" onclick="toggleCheck(this)">
            <div class="checkbox"></div>
            <span><strong>3 Remolachas</strong> (CRUDAS)</span>
        </div>
        <div class="check-item" onclick="toggleCheck(this)">
            <div class="checkbox"></div>
            <span><strong>4-6 Limones</strong> frescos</span>
        </div>
        <div class="check-item" onclick="toggleCheck(this)">
            <div class="checkbox"></div>
            <span><strong>2 Litros</strong> agua filtrada</span>
        </div>
    </div>

    <!-- BOT√ìN P√ÅNICO -->
    <button class="panic-btn" onclick="startBreath()">
        <span>üö® ESTOY NERVIOSO</span>
        <span class="panic-sub">Activar Regulador de Ansiedad (4-7-8)</span>
    </button>

    <!-- DESCARGA -->
    <a href="protocolo_nitro.pdf" download="protocolo_nitro.pdf" class="download-link">
        üìÇ DESCARGAR MANUAL COMPLETO (PDF)
    </a>

    <footer>
        SISTEMA CLANDESTINO v3.0<br>Uso personal y confidencial.
    </footer>

</div>

<!-- OVERLAY RESPIRACI√ìN -->
<div id="breath-overlay">
    <!-- C√≠rculo animado de fondo -->
    <div class="breath-visual" id="breath-circle"></div>
    
    <div class="breath-text-container">
        <span class="breath-action" id="breath-action">LISTO...</span>
        <span class="breath-countdown" id="breath-count"></span>
    </div>

    <button class="close-overlay" onclick="stopBreath()">VOLVER</button>
</div>

<script>
    // --- 1. INTERFAZ Y UTILIDADES ---
    function toggleMission() {
        const body = document.getElementById('mission-body');
        const icon = document.getElementById('mission-icon');
        if (body.classList.contains('open')) {
            body.classList.remove('open');
            icon.innerText = '‚ñº';
        } else {
            body.classList.add('open');
            icon.innerText = '‚ñ≤';
        }
    }

    function toggleCheck(el) {
        el.classList.toggle('done');
        if(navigator.vibrate) navigator.vibrate(30);
    }

    function resetApp() {
        // Limpiar inputs y estado
        document.getElementById('actionTime').value = '';
        document.getElementById('timeline').style.display = 'none';
        document.getElementById('timeline').innerHTML = '';
        
        // Desmarcar checklist
        const checks = document.querySelectorAll('.check-item');
        checks.forEach(c => c.classList.remove('done'));
        
        // Scroll arriba
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // --- 2. L√ìGICA DE TIEMPO (CRONOGRAMA) ---
    function calcTimeline() {
        const input = document.getElementById('actionTime').value;
        if(!input) return;

        const tlDiv = document.getElementById('timeline');
        tlDiv.style.display = 'block';
        tlDiv.innerHTML = ''; 

        const d = new Date();
        const [h, m] = input.split(':');
        d.setHours(h, m, 0);

        // Eventos en orden cronol√≥gico inverso a la acci√≥n
        const events = [
            { offset: -6, title: "√öLTIMA COMIDA S√ìLIDA", desc: "Prote√≠na + Verde. CERO az√∫car/alcohol.", type: "normal" },
            { offset: -3, title: "PREPARACI√ìN", desc: "Licuar ingredientes. No colar la fibra.", type: "normal" },
            { offset: -2, title: "‚ö° BEBER NITRO", desc: "Beber todo en 15 mins. No de golpe.", type: "highlight" },
            { offset: -0.25, title: "RESPIRACI√ìN T√ÅCTICA", desc: "4 ciclos de 4-7-8 para bajar cortisol.", type: "normal" },
            { offset: 0, title: "üöÄ HORA DE ACCI√ìN", desc: "Pico m√°ximo de vasodilataci√≥n.", type: "success" }
        ];

        events.forEach((e, i) => {
            // Calcular hora del evento
            const eventTime = new Date(d.getTime() + (e.offset * 60 * 60 * 1000));
            const timeStr = eventTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            // Determinar clases CSS
            let classList = 't-item';
            if(e.type === 'highlight') classList += ' highlight';
            if(e.type === 'success') classList += ' success';

            const html = `
            <div class="${classList}" style="animation-delay: ${i * 0.1}s">
                <div class="t-dot"></div>
                <span class="t-time">${timeStr}</span>
                <div class="t-action">${e.title}</div>
                <div class="t-desc">${e.desc}</div>
            </div>`;
            tlDiv.innerHTML += html;
        });
    }

    // --- 3. SISTEMA DE RESPIRACI√ìN (CON CONTADOR) ---
    let breathInterval;
    let countInterval;

    function startBreath() {
        const overlay = document.getElementById('breath-overlay');
        overlay.style.display = 'flex';
        // Peque√±o delay para la transici√≥n CSS
        setTimeout(() => overlay.style.opacity = '1', 10);
        
        runBreathCycle(); // Primer ciclo inmediato
        breathInterval = setInterval(runBreathCycle, 19000); // 4+7+8 = 19s por ciclo
    }

    function stopBreath() {
        const overlay = document.getElementById('breath-overlay');
        overlay.style.opacity = '0';
        setTimeout(() => overlay.style.display = 'none', 300);
        
        clearInterval(breathInterval);
        clearInterval(countInterval);
        resetVisuals();
    }

    function resetVisuals() {
        const circle = document.getElementById('breath-circle');
        const action = document.getElementById('breath-action');
        const count = document.getElementById('breath-count');
        
        circle.style.transition = 'none';
        circle.style.transform = 'scale(1)';
        circle.style.opacity = '0.2';
        action.innerText = "LISTO...";
        count.innerText = "";
    }

    function runCount(seconds, element) {
        let remaining = seconds;
        element.innerText = remaining;
        clearInterval(countInterval); // Limpiar previo
        
        countInterval = setInterval(() => {
            remaining--;
            if (remaining >= 0) element.innerText = remaining;
        }, 1000);
    }

    function runBreathCycle() {
        const circle = document.getElementById('breath-circle');
        const action = document.getElementById('breath-action');
        const countDisplay = document.getElementById('breath-count');

        // 1. INHALA (4 seg)
        action.innerText = "INHALA (Nariz)";
        action.style.color = "#00E676"; // Verde
        circle.style.transition = "transform 4s cubic-bezier(0.4, 0, 0.2, 1), opacity 4s";
        circle.style.transform = "scale(5)"; // Crece
        circle.style.opacity = "0.8"; 
        circle.style.background = "radial-gradient(circle, #00E676 0%, transparent 70%)";
        
        runCount(4, countDisplay);

        // 2. AGUANTA (7 seg)
        setTimeout(() => {
            action.innerText = "AGUANTA";
            action.style.color = "#fff";
            circle.style.transition = "none"; // Congelar tama√±o
            // No cambiamos escala
            
            runCount(7, countDisplay);
        }, 4000);

        // 3. EXHALA (8 seg)
        setTimeout(() => {
            action.innerText = "EXHALA (Boca suave)";
            action.style.color = "#E50914"; // Rojo
            circle.style.background = "radial-gradient(circle, #E50914 0%, transparent 70%)";
            circle.style.transition = "transform 8s cubic-bezier(0.4, 0, 0.2, 1), opacity 8s";
            circle.style.transform = "scale(1)"; // Reduce
            circle.style.opacity = "0.2";
            
            runCount(8, countDisplay);
        }, 11000); // 4000 + 7000 = 11000
    }

</script>

</body>
</html>
